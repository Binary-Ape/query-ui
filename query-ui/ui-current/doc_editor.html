<div ng-controller="qwDocEditorController as dec"
  ng-show="dec.validated.valid()" id="doc_editor_tabular">

  <h4>Document Editor</h4>

<!-- row of controls for the query *********** -->
  <div class="row flex-left controls">
    <select
       ng-model="dec.options.selected_bucket"
       ng-options="bucket for bucket in dec.buckets">
    </select>
    Limit:
    <input type="number" ng-model="dec.options.limit" style="width: 4rem;">
    Offset:
    <input type="number" ng-model="dec.options.offset" style="width: 4rem;">
    Where:
    <input type="text" ng-model="dec.options.where_clause">
  </div>

<!-- Buttons to get the documents -->
  <div class="row margin-bottom1">
    <button ng-click="dec.retrieveDocs()" class="qw-doc-editor button-exec">
      <div ng-if="!dec.options.queryBusy">Retrieve Docs</div>
      <div ng-if="dec.options.queryBusy" class="icon-button">
        Cancel <span class="icon fa-spinner fa-spin fa-pulse"></span></div>
    </button>
    <span>
      <button ng-click="dec.prevBatch()" class="outline" ng-disabled="dec.options.offset <= 0">
        < Prev Batch
      </button>
      <button ng-click="dec.nextBatch()" class="outline" >
        Next Batch >
      </button>
    </span>
  </div>

<!-- RESULTS ************* -->
  <div class="text-small" ng-if="dec.options.selected_bucket && dec.options.current_query.length > 0">
    Results for: &nbsp; <span class="success semi-bold margin-bottom-half">{{dec.options.current_query}}</span>
  </div>

  <div class="doc-editor-results" ng-if="dec.options.selected_bucket && dec.options.current_query.length > 0">
    <qw-json-table-editor data="dec.options.current_result" controller="dec"></div>
</div>
